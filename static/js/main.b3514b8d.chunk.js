(this["webpackJsonpreact-social"]=this["webpackJsonpreact-social"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var c=n(3),s=n.n(c),a=n(17),r=n.n(a),i=(n(34),n(35),n(11)),o=n.n(i),l=n(14),u=n(9),j=n(2),d=Object(c.createContext)(),m=function(e){var t=Object(c.useState)(null),n=Object(u.a)(t,2),s=n[0],a=n[1];return Object(j.jsx)(d.Provider,{value:{user:[s,a]},children:e.children})},p=n(15),b=(n(38),n(40),n(41),n(42),p.a.initializeApp({apiKey:"AIzaSyDBTJ2pf8e5ADTZCOCrs6q1teWkOPeo9O4",authDomain:"reactsocial-db5cb.firebaseapp.com",projectId:"reactsocial-db5cb",storageBucket:"reactsocial-db5cb.appspot.com",messagingSenderId:"305219774871",appId:"1:305219774871:web:8d8aab5862fc945c793cd2"}).firestore()),f=p.a.auth(),O=p.a.storage(),h=new p.a.auth.GoogleAuthProvider,x=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.signInWithPopup(h).then((function(e){console.log(e.user),t=e.user})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.signOut().then((function(){console.log("signout successful"),t=!0})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n(43);function v(){var e=Object(u.a)(Object(c.useContext)(d).user,2),t=(e[0],e[1]),n=function(){var e=Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:(n=e.sent)&&t(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"signInBtn",onClick:n,children:Object(j.jsx)("p",{children:"Sign in with Google"})})}function N(e){var t=e.username,n=e.comment;return Object(j.jsx)("div",{className:"comment",children:Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{style:{fontWeight:"600",marginRight:"4px"},children:t}),n]})})}n(44);function C(e){var t=e.id,n=e.comments,s=Object(u.a)(Object(c.useContext)(d).user,2),a=s[0],r=(s[1],Object(c.useState)("")),i=Object(u.a)(r,2),o=i[0],l=i[1],m=Object(c.useState)(n||[]),p=Object(u.a)(m,2),f=p[0];p[1];return Object(j.jsxs)("div",{className:"commentInput",children:[Object(j.jsx)("textarea",{className:"commentInput_text",rows:"1",value:o,placeholder:"comment something",onChange:function(e){l(e.target.value)}}),Object(j.jsx)("button",{disabled:!a,onClick:function(){""!=o&&(f.push({username:a.email.replace("@gmail.com",""),comment:o}),b.collection("posts").doc(t).update({comments:f}),l(""))},children:"post"})]})}n(45);function w(){var e=Object(u.a)(Object(c.useContext)(d).user,2),t=(e[0],e[1]),n=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:e.sent&&t(null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"signOutBtn",onClick:n,children:Object(j.jsx)("p",{children:"Sign out"})})}n(46);var y=function(){var e=Object(u.a)(Object(c.useContext)(d).user,2),t=e[0];return e[1],console.log(t),Object(j.jsxs)("div",{className:"navbar",children:[Object(j.jsx)("h3",{className:"logo",children:"React Social"}),t?Object(j.jsx)(w,{}):Object(j.jsx)(v,{})]})},R=(n(47),n(27)),L=n.n(R);var U=n(21);var I=function(){var e=Object(u.a)(Object(c.useContext)(d).user,2),t=e[0],n=(e[1],Object(c.useState)("")),s=Object(u.a)(n,2),a=s[0],r=s[1],i=Object(c.useState)(null),o=Object(u.a)(i,2),l=o[0],m=o[1],p=Object(c.useState)(0),f=Object(u.a)(p,2),h=f[0],x=f[1];return Object(j.jsx)("div",{children:t?Object(j.jsx)("div",{className:"createpost",children:Object(j.jsxs)("div",{className:"createpost_loggedin",children:[Object(j.jsx)("p",{children:"Create Post "}),Object(j.jsxs)("div",{className:"createpost_loggedinCenter",children:[Object(j.jsx)("textarea",{className:"createpost_textArea",rows:"3",placeholder:"enter your caption here..",value:a,onChange:function(e){r(e.target.value)}}),Object(j.jsx)("div",{className:"createpost_imagePreview",children:Object(j.jsx)("img",{id:"image_preview",alt:""})})]}),Object(j.jsxs)("div",{className:"createpost_loggedinBottom",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{className:"createpost_addImage",htmlFor:"imgInput",children:Object(j.jsx)(L.a,{})}),Object(j.jsx)("input",{id:"imgInput",type:"file",accept:"image/*",onChange:function(e){if(e.target.files[0]){m(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]),n=document.getElementById("image_preview");n.src=t,n.style.display="block"}}})]}),Object(j.jsx)("button",{className:"createpost_uploadBtn",onClick:function(){if(a){var e=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=n.length,s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*c));return t}(10),n=t.email.substr(0,t.email.indexOf("@")),c=n+e;if(l)O.ref("images/".concat(c,".jpg")).put(l).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);x(t),console.log(h)}),(function(e){console.log(e.message)}),(function(){O.ref("images").child("".concat(c,".jpg")).getDownloadURL().then((function(e){b.collection("posts").add({caption:a,imageURL:e,timestamp:U.a.firestore.FieldValue.serverTimestamp(),username:n,profileURL:t.photoURL})})),x(0),r(""),document.getElementById("image_preview").src=""}));else b.collection("posts").add({caption:a,imageURL:"",timestamp:U.a.firestore.FieldValue.serverTimestamp(),username:n,profileURL:t.photoURL})}else alert("Caption is empty")},disabled:!a,children:"Upload ".concat(0!=h?h:"")})]})]})}):Object(j.jsxs)("div",{className:"createpost",children:[Object(j.jsx)(v,{}),Object(j.jsx)("p",{children:"to post and comment"})]})})};n(58);function S(e){var t=e.id,n=e.profileURL,s=e.userName,a=e.imageURL,r=e.content,i=e.comments,o=Object(u.a)(Object(c.useContext)(d).user,2),l=o[0];o[1];return Object(j.jsxs)("div",{className:"posts",children:[Object(j.jsxs)("div",{className:"posts_header",children:[Object(j.jsxs)("div",{className:"posts_headerleft",children:[Object(j.jsx)("img",{src:n,alt:""}),Object(j.jsxs)("p",{style:{fontWeight:"600"},children:[" ",s]})]}),Object(j.jsx)("div",{className:"posts_headerright",children:Object(j.jsx)("button",{onClick:function(){null!=l?s==l.email.substr(0,l.email.indexOf("@"))?(O.refFromURL(a).delete(),b.collection("posts").doc(t).delete()):alert("cannot delete others posts"):alert("sign in to delete")},children:"Delete"})})]}),Object(j.jsx)("div",{className:"posts_Center",children:Object(j.jsx)("img",{src:a,alt:""})}),Object(j.jsx)("div",{children:Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{style:{fontWeight:"600",marginRight:"4px"},children:s}),r]})}),i?i.map((function(e){return Object(j.jsx)(N,{username:e.username,comment:e.comment})})):Object(j.jsx)(j.Fragment,{}),Object(j.jsx)(C,{id:t,comments:i})]})}n(59);function _(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){b.collection("posts").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(j.jsx)("div",{className:"feed",children:n.map((function(e){var t=e.id,n=e.post;return Object(j.jsx)(S,{id:t,profileURL:n.profileURL,userName:n.username,imageURL:n.imageURL,content:n.caption,comments:n.comments},t)}))})}n(60);function k(){return Object(j.jsx)(m,{children:Object(j.jsxs)("div",{className:"home",children:[Object(j.jsx)(y,{}),Object(j.jsx)(I,{}),Object(j.jsx)(_,{})]})})}var B=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)(k,{})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(B,{})}),document.getElementById("root")),F()}},[[62,1,2]]]);
//# sourceMappingURL=main.b3514b8d.chunk.js.map