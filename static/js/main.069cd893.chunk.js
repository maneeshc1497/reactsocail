(this["webpackJsonpreact-social"]=this["webpackJsonpreact-social"]||[]).push([[0],{29:function(e,t,c){},30:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},54:function(e,t,c){"use strict";c.r(t);var n=c(3),s=c.n(n),a=c(17),r=c.n(a),i=(c(29),c(30),c(12)),o=c.n(i),l=c(15),j=c(9),u=c(2),d=Object(n.createContext)(),m=function(e){var t=Object(n.useState)(null),c=Object(j.a)(t,2),s=c[0],a=c[1];return Object(u.jsx)(d.Provider,{value:{user:[s,a]},children:e.children})},p=c(14),b=p.a.initializeApp({apiKey:"AIzaSyDBTJ2pf8e5ADTZCOCrs6q1teWkOPeo9O4",authDomain:"reactsocial-db5cb.firebaseapp.com",projectId:"reactsocial-db5cb",storageBucket:"reactsocial-db5cb.appspot.com",messagingSenderId:"305219774871",appId:"1:305219774871:web:8d8aab5862fc945c793cd2"}).firestore(),h=p.a.auth(),O=p.a.storage(),f=new p.a.auth.GoogleAuthProvider,g=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signInWithPopup(f).then((function(e){console.log(e.user),t=e.user})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c(38);function x(){var e=Object(j.a)(Object(n.useContext)(d).user,2),t=(e[0],e[1]),c=function(){var e=Object(l.a)(o.a.mark((function e(){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:(c=e.sent)&&t(c);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"signInBtn",onClick:c,children:Object(u.jsx)("p",{children:"Sign in with Google"})})}function v(e){var t=e.username,c=e.comment;return Object(u.jsx)("div",{className:"comment",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{style:{fontWeight:"600",marginRight:"4px"},children:t}),c]})})}c(39);function N(e){var t=e.id,c=e.comments,s=Object(j.a)(Object(n.useContext)(d).user,2),a=s[0],r=(s[1],Object(n.useState)("")),i=Object(j.a)(r,2),o=i[0],l=i[1],m=Object(n.useState)(c||[]),p=Object(j.a)(m,2),h=p[0];p[1];return Object(u.jsxs)("div",{className:"commentInput",children:[Object(u.jsx)("textarea",{className:"commentInput_text",rows:"1",value:o,placeholder:"comment something",onChange:function(e){l(e.target.value)}}),Object(u.jsx)("button",{onClick:function(){""!=o&&(h.push({username:a.email.replace("@gmail.com",""),comment:o}),b.collection("posts").doc(t).update({comments:h}),l(""))},children:"post"})]})}c(40);var C=function(){var e=Object(j.a)(Object(n.useContext)(d).user,2),t=e[0];return e[1],console.log(t),Object(u.jsxs)("div",{className:"navbar",children:[Object(u.jsx)("h3",{className:"logo",children:"React Social"}),t?Object(u.jsx)("img",{className:"navbar_img",src:t.photoURL}):Object(u.jsx)(x,{})]})},R=(c(41),c(22)),y=c.n(R);var L=function(){var e=Object(j.a)(Object(n.useContext)(d).user,2),t=e[0],c=(e[1],Object(n.useState)("")),s=Object(j.a)(c,2),a=s[0],r=s[1],i=Object(n.useState)(null),o=Object(j.a)(i,2),l=o[0],m=o[1],h=Object(n.useState)(0),f=Object(j.a)(h,2),g=f[0],v=f[1];return Object(u.jsx)("div",{children:t?Object(u.jsx)("div",{className:"createpost",children:Object(u.jsxs)("div",{className:"createpost_loggedin",children:[Object(u.jsx)("p",{children:"Create Post "}),Object(u.jsxs)("div",{className:"createpost_loggedinCenter",children:[Object(u.jsx)("textarea",{className:"createpost_textArea",rows:"3",placeholder:"enter your caption here..",value:a,onChange:function(e){r(e.target.value)}}),Object(u.jsx)("div",{className:"createpost_imagePreview",children:Object(u.jsx)("img",{id:"image_preview",alt:""})})]}),Object(u.jsxs)("div",{className:"createpost_loggedinBottom",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{className:"createpost_addImage",htmlFor:"imgInput",children:Object(u.jsx)(y.a,{})}),Object(u.jsx)("input",{id:"imgInput",type:"file",accept:"image/*",onChange:function(e){if(e.target.files[0]){m(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]),c=document.getElementById("image_preview");c.src=t,c.style.display="block"}}})]}),Object(u.jsx)("button",{className:"createpost_uploadBtn",onClick:function(){if(a){var e=function(e){for(var t="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=c.length,s=0;s<e;s++)t+=c.charAt(Math.floor(Math.random()*n));return t}(10),c=t.email.substr(0,t.email.indexOf("@")),n=c+e;if(l)O.ref("images/".concat(n,".jpg")).put(l).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);v(t),console.log(g)}),(function(e){console.log(e.message)}),(function(){O.ref("images").child("".concat(n,".jpg")).getDownloadURL().then((function(e){b.collection("posts").add({caption:a,imageURL:e,timestamp:p.a.firestore.FieldValue.serverTimestamp(),username:c,profileURL:t.photoURL})})),v(0),r(""),document.getElementById("image_preview").src=""}));else b.collection("posts").add({caption:a,imageURL:"",timestamp:p.a.firestore.FieldValue.serverTimestamp(),username:c,profileURL:t.photoURL})}else alert("Caption is empty")},style:{color:a?"black":"lightgrey"},disabled:!a,children:"Upload ".concat(0!=g?g:"")})]})]})}):Object(u.jsxs)("div",{className:"createpost",children:[Object(u.jsx)(x,{}),Object(u.jsx)("p",{children:"to post and comment"})]})})};c(50);function U(e){var t=e.id,c=e.profileURL,n=e.userName,s=e.imageURL,a=e.content,r=e.comments;return Object(u.jsxs)("div",{className:"posts",children:[Object(u.jsxs)("div",{className:"posts_header",children:[Object(u.jsxs)("div",{className:"posts_headerleft",children:[Object(u.jsx)("img",{src:c,alt:""}),Object(u.jsxs)("p",{style:{fontWeight:"600"},children:[" ",n]})]}),Object(u.jsx)("div",{className:"posts_headerright",children:Object(u.jsx)("button",{onClick:function(){O.refFromURL(s).delete(),b.collection("posts").doc(t).delete()},children:"Delete"})})]}),Object(u.jsx)("div",{className:"posts_Center",children:Object(u.jsx)("img",{src:s,alt:""})}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{style:{fontWeight:"600",marginRight:"4px"},children:n}),a]})}),r?r.map((function(e){return Object(u.jsx)(v,{username:e.username,comment:e.comment})})):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)(N,{id:t,comments:r})]})}c(51);function w(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){b.collection("posts").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(u.jsx)("div",{className:"feed",children:c.map((function(e){var t=e.id,c=e.post;return Object(u.jsx)(U,{id:t,profileURL:c.profileURL,userName:c.username,imageURL:c.imageURL,content:c.caption,comments:c.comments},t)}))})}c(52);function _(){return Object(u.jsx)(m,{children:Object(u.jsxs)("div",{className:"home",children:[Object(u.jsx)(C,{}),Object(u.jsx)(L,{}),Object(u.jsx)(w,{})]})})}var I=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)("header",{className:"App-header",children:Object(u.jsx)(_,{})})})},S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,66)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(I,{})}),document.getElementById("root")),S()}},[[54,1,2]]]);
//# sourceMappingURL=main.069cd893.chunk.js.map